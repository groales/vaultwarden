# docker-compose.override.traefik.yml.example
#
# Este archivo configura Vaultwarden para usar Traefik como reverse proxy.
#
# Para usarlo:
#   Desde Portainer (Git Repository):
#     - Repository URL: https://git.ictiberia.com/groales/vaultwarden
#     - Compose path: docker-compose.yml
#     - Additional paths: docker-compose.override.traefik.yml.example
#     - Environment variables:
#         DOMAIN_HOST=vaultwarden.tudominio.com
#         ADMIN_TOKEN=tu_token_admin_seguro
#
#   Desde CLI:
#     1. Copia este archivo a docker-compose.override.yml
#     2. Crea archivo .env con las variables necesarias
#
# Docker Compose autom√°ticamente fusiona docker-compose.yml + docker-compose.override.yml

services:
  vaultwarden:
    labels:
      - "traefik.enable=true"   
      - "traefik.http.routers.vaultwarden.rule=Host(`${DOMAIN_HOST}`)"
      - "traefik.http.routers.vaultwarden.entrypoints=websecure"
      - "traefik.http.routers.vaultwarden.tls.certresolver=letsencrypt"
      - "traefik.http.routers.vaultwarden.service=vaultwarden-svc"
      - "traefik.http.services.vaultwarden-svc.loadbalancer.server.port=80"
      
